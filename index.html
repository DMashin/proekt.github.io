<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style/all.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/function-plot/1.22.7/function-plot.js"></script>
    <link href="images/favicon.ico" rel="icon">
    <title>Главная</title>
</head>
<body>
    <header>
        <div>
            <section>
                <div class="name">MATH FUNCTIONS</div>
                        <nav>
                            <ul>
                                <li><span>ГЛАВНАЯ</span></li>
                                <li><a href="sites/reference.html">СПРАВКА</a></li>
                                <li><a href="sites/site.html">О САЙТЕ</a></li>
                            </ul>
                        </nav>
            </section>
        </div>
    </header>
<section>
    <aside>
            <h3>Теоретическая справка:</h3>
            <ol class="ol_1">
                <li><a href="sites/aside/function.html">Понятие "функция". Элементарные функции</a></li>
                <li><a href="sites/aside/stepen.html">Степенные функции</a></li>
                <li><a href="sites/aside/indicative.html">Показательные функции</a></li>
                <li><a href="sites/aside/logarithmic.html">Логарифмические функции</a></li>
                <li><a href="sites/aside/trigonometric.html">Тригонометрические функции</a></li>
                <li><a href="sites/aside/inverse_trigonometric.html">Обратные тригонометрические функции</a></li>
            </ol>
    </aside>
    <main>
        <div>
            <h1>Построение графиков</h1>
            <div class="input">y(x) = <input id="functionInput" placeholder="Введите функцию"></div>
            <div id="message" class="message"></div>
            <div id="plot"></div>
            <div id="root"></div>
            <script>
                const functionPlot = window.functionPlot;
                const inputFunction = document.getElementById('functionInput');
                const message = document.getElementById('message');
                const plot = document.getElementById('plot');
                inputFunction.addEventListener('input', (e) => {
                    const functionValue = inputFunction.value.replace(/ /g, ''); //убираем все пробелы из строки
                    //console.log(functionValue)
                    if (functionValue) { // и проверяем, не пустая ли строка
                        try {
                            functionPlot({
                                //title: functionValue,
                                width: 750,
                                height: 750,
                                target: "#plot",
                                yAxis: {
                                    label: 'y'
                                },
                                xAxis: {
                                    label: 'x'
                                },
                                grid: true,
                                data: [
                                    {
                                        fn: functionValue,
                                    }
                                ]
                            });
                            message.innerText = ''; // "обнуляем" сообщение, иначе после первой ошибки оно останется висеть
                        } catch (e) {
                            //console.log(e)
                            message.innerText = 'Некорректная функция!!!';
                            plot.innerText = '';
                        }
                    } else {
                        message.innerText = 'Вы ввели пустой текст!!!';
                    }
                });
                function arcctg(x) { return Math.PI / 2 - Math.atan(x); }
            </script>
        </div>
    </main>
</section>
</body>
</html>